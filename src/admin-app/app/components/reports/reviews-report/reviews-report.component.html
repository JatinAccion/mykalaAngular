<div class="container">
    <div class=" row title  p-0">
        <div class="col-sm-7">
            <h1>Reviews</h1>
        </div>
        <div class="col-sm-2 pr-2 text-right">
            <select class="ddl_default form-control " [(ngModel)]="reportModel" (change)="getData()">
                <option>Monthly</option>
                <option>Yearly</option>
            </select>
        </div>
        <div class="col-sm-3 pr-2 text-right">
            <input class="form-control " type="number" [(ngModel)]="currentYear" (input)="getData()">
            <select *ngIf="reportModel=='Monthly'" class="ddl_default form-control" [(ngModel)]="currentMonth" (change)="getData()">
                <option *ngFor="let option of monthLabels" [ngValue]="option.value">
                    {{option.name}}
                </option>
            </select>

        </div>
    </div>
    <div class="row p-2">
        <chart [type]="type" [data]="data_avg" [options]="options_avg" style="width:100%;height:200px" class="backgroundWhite"></chart>
    </div>
    <div class="row p-2">
        <chart [type]="type" [data]="data" [options]="options" style="width:100%;height:200px" class="backgroundWhite"></chart>
    </div>
    <div class="row pl-2">
        <div class="col-sm-3 pl-0">
            <div class="backgroundWhite">
                <div class="text-center p-2">
                    Reviews
                    <span class="float-right">
                        <a (click)="goto('one',0)">
                            <i class="fa fa-refresh" aria-hidden="true"></i>
                        </a>
                    </span>
                    <hr class="m-2" />
                </div>
                <div class="row pl-3 pr-2 pb-2">
                    <div class="col-sm-2">
                        <a (click)="goto('one',-1)" *ngIf="!widget.one.first">
                            <i class="fa fa-caret-left caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                    <div class="col-sm-8 text-center colorlightGray">
                        {{reportModel !== 'Monthly'?'':( widget.one.monthName + ',') }} {{widget.one.year}}
                    </div>
                    <div class="col-sm-2">
                        <a (click)="goto('one',1)" *ngIf="!widget.one.last">
                            <i class="fa fa-caret-right caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
                <div class="row p-2">
                    <div class="col-sm-12 text-center colorDarkBlue">
                        <h4>{{widget.one.value}}</h4>
                    </div>
                </div>
                <!-- <div class="text-center p-2">
                    <a class="btn btn-default" (click)="getDetails('one')">Detail</a>
                </div> -->
            </div>
        </div>
        <div class="col-sm-3 pl-0">
            <div class="backgroundWhite">
                <div class="text-center p-2">
                    Avg. Response Time
                    <span class="float-right">
                        <a (click)="goto('two',0)">
                            <i class="fa fa-refresh" aria-hidden="true"></i>
                        </a>
                    </span>
                    <hr class="m-2" />
                </div>
                <div class="row pl-3 pr-2 pb-2">
                    <div class="col-sm-2">
                        <a (click)="goto('two',-1)" *ngIf="!widget.two.first">
                            <i class="fa fa-caret-left caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                    <div class="col-sm-8 text-center colorlightGray">
                        {{reportModel !== 'Monthly'?'':(widget.two.monthName + ',') }} {{widget.two.year}}
                    </div>
                    <div class="col-sm-2">
                        <a (click)="goto('two',1)" *ngIf="!widget.two.last">
                            <i class="fa fa-caret-right caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
                <div class="row p-2">
                    <div class="col-sm-12 text-center colorDarkBlue">
                        <h4>{{widget.two.value}} days</h4>
                    </div>
                </div>
                <!-- <div class="text-center p-2">
                    <a class="btn btn-default" (click)="getDetails('two')">Detail</a>
                </div> -->
            </div>
        </div>
        <div class="col-sm-3 pl-0">
            <div class="backgroundWhite">
                <div class="text-center p-2">
                    Didn't Leave Review
                    <span class="float-right">
                        <a (click)="goto('three',0)">
                            <i class="fa fa-refresh" aria-hidden="true"></i>
                        </a>
                    </span>
                    <hr class="m-2" />
                </div>
                <div class="row pl-3 pr-2 pb-2">
                    <div class="col-sm-2">
                        <a (click)="goto('three',-1)" *ngIf="!widget.three.first">
                            <i class="fa fa-caret-left caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                    <div class="col-sm-8 text-center colorlightGray">
                        {{reportModel !== 'Monthly'?'':(widget.three.monthName + ',') }} {{widget.three.year}}
                    </div>
                    <div class="col-sm-2">
                        <a (click)="goto('three',1)" *ngIf="!widget.three.last">
                            <i class="fa fa-caret-right caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
                <div class="row p-2">
                    <div class="col-sm-12 text-center colorDarkBlue">
                        <h4>{{widget.three.value}}</h4>
                    </div>
                </div>
                <!-- <div class="text-center p-2">
                    <a class="btn btn-default" (click)="getDetails('three')">Detail</a>
                </div> -->
            </div>
        </div>
        <div class="col-sm-3 pr-2 pl-0">
            <div class="backgroundWhite">
                <div class="text-center p-2">
                    Avg. Rating
                    <span class="float-right">
                        <a (click)="goto('four',0)">
                            <i class="fa fa-refresh" aria-hidden="true"></i>
                        </a>
                    </span>
                    <hr class="m-2" />
                </div>
                <div class="row pl-3 pr-2 pb-2">
                    <div class="col-sm-2">
                        <a (click)="goto('four',-1)" *ngIf="!widget.four.first">
                            <i class="fa fa-caret-left caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                    <div class="col-sm-8 text-center colorlightGray">
                        {{reportModel !== 'Monthly'?'':(widget.four.monthName + ',')}} {{widget.four.year}}
                    </div>
                    <div class="col-sm-2">
                        <a (click)="goto('four',1)" *ngIf="!widget.four.last">
                            <i class="fa fa-caret-right caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
                <div class="row p-2">
                    <div class="col-sm-12 text-center colorDarkBlue">
                        <h4>{{widget.four.value == '0' ? 'N/A' : widget.four.value}}</h4>
                    </div>
                </div>
                <!-- <div class="text-center p-2">
                    <a class="btn btn-default" (click)="getDetails('four')">Detail</a>
                </div> -->
            </div>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col-sm-12">
            <div class="row p-0">
                <div class="col-sm-8 p-0 pagination_align">
                    <pagination-controls id='server' class="my-pagination" (pageChange)="getPage($event)" screenReaderPaginationLabel="Pagination" screenReaderPageLabel="page" screenReaderCurrentLabel="You're on page"></pagination-controls>
                </div>
                <div class="col-sm-4 text-right p-1">
                    <input type="text" placeholder="search for seller by name" class="form-control txt_Search" [(ngModel)]="retailerName" (keyup.enter)="getPage(1)" />
                </div>
                <!-- <div class="col-sm-8 text-right">
                    <select class="ddl_default mt-3">
                        <option>Download</option>
                        <option>PDF</option>
                    </select>
                </div> -->
            </div>
            <div class="row p-2">
                <div class="col-sm-12 p-0">
                    <div class="col-sm-12 p-2 m-1 backgroundWhite">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th width="5%">
                                        <input type="checkbox" />
                                    </th>
                                    <th width="10%">Seller Status</th>
                                    <th width="18%">Seller</th>
                                    <th width="15%">Enrollment Date</th>
                                    <th width="11%">Avg. Rating</th>
                                    <th width="13%">Transactions</th>
                                    <th width="12%">Reviews</th>
                                    <th width="16%">Avg.Response Time</th>
                                </tr>
                            </thead>
                            <tbody *ngFor="let retailer of retailers.content | paginate: { id: 'server', itemsPerPage: retailers.size, currentPage: retailers.number + 1 , totalItems: retailers.totalElements }">
                                <tr>
                                    <td>
                                        <input type="checkbox" />
                                    </td>
                                    <td>{{retailer.status?'Active':'Inactive'}}</td>
                                    <td>
                                        <a class="colorBlue" (click)="getRetailerReviewRatings(retailer)" [attr.aria-expanded]="!retailer.isCollapsed" aria-controls="collapseExample">{{retailer.businessName}}</a>
                                    </td>
                                    <td>{{retailer.createdDate | date: 'shortDate'}}</td>
                                    <td>{{retailer.avgRating}}</td>
                                    <td>{{retailer.transcation}}</td>
                                    <td>{{retailer.totalReviews}}</td>
                                    <td>{{retailer.avgResponseTime}} days</td>
                                </tr>
                                <tr *ngIf="!retailer.isCollapsed" style="height:130px;">
                                    <td colspan="4">

                                    </td>
                                    <td colspan="4">
                                        <chart [type]="'horizontalBar'" [data]="retailer.chartData" [options]="options_retailerRatings" style="width:200px;" class="backgroundWhite"></chart>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>