<div class="container">
    <div class="row title py-3">
        <div class="col-sm-9 p-0">
            <h1>Summary</h1>
        </div>
        <div class="col-sm-3 p-0">
            <select class="ddl_default form-control" [(ngModel)]="reportModel" (change)="getData()">
                <option>Monthly</option>
                <option>Yearly</option>
            </select>
        </div>
    </div>
    <div class="row ">
        <div class="col-sm-3 pl-0">
            <div class="backgroundWhite">
                <div class="text-center p-2">
                    New Members
                    <span class="float-right">
                        <a>
                            <i class="fa fa-refresh" aria-hidden="true"></i>
                        </a>
                    </span>
                    <hr class="m-2" />
                </div>
                <div class="row pl-3 pr-2 pb-2">
                    <div class="col-sm-2">
                        <a (click)="goto('new',-1)">
                            <i class="fa fa-caret-left caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                    <div class="col-sm-8 text-center colorlightGray">
                        {{this.reportModel !== 'Monthly'?'':(widget.new.month + 1 + ',') }} {{widget.new.year}}
                    </div>
                    <div class="col-sm-2">
                        <a (click)="goto('new',1)">
                            <i class="fa fa-caret-right caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
                <div class="row p-2">
                    <div class="col-sm-12 text-center colorDarkBlue">
                        <h4>{{widget.new.value}}</h4>
                    </div>
                </div>
                <div class="text-center p-2">
                    <a class="btn btn-default" (click)="getDetails('new')">Detail</a>
                </div>
            </div>
        </div>
        <div class="col-sm-3 pl-0">
            <div class="backgroundWhite">
                <div class="text-center p-2">
                    Active Members
                    <span class="float-right">
                        <a (click)="goto('active',0)">
                            <i class="fa fa-refresh" aria-hidden="true"></i>
                        </a>
                    </span>
                    <hr class="m-2" />
                </div>
                <div class="row pl-3 pr-2 pb-2">
                    <div class="col-sm-2">
                        <a (click)="goto('active',-1)">
                            <i class="fa fa-caret-left caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                    <div class="col-sm-8 text-center colorlightGray">
                        {{this.reportModel !== 'Monthly'?'':(widget.active.month + 1 + ',') }} {{widget.active.year}}
                    </div>
                    <div class="col-sm-2">
                        <a (click)="goto('active',1)">
                            <i class="fa fa-caret-right caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
                <div class="row p-2">
                    <div class="col-sm-12 text-center colorDarkBlue">
                        <h4>{{widget.active.value}}</h4>
                    </div>
                </div>
                <div class="text-center p-2">
                    <a class="btn btn-default" (click)="getDetails('active')">Detail</a>
                </div>
            </div>
        </div>
        <div class="col-sm-3 pl-0">
            <div class="backgroundWhite">
                <div class="text-center p-2">
                    Total Members
                    <span class="float-right">
                        <a (click)="goto('total',0)">
                            <i class="fa fa-refresh" aria-hidden="true"></i>
                        </a>
                    </span>
                    <hr class="m-2" />
                </div>
                <div class="row pl-3 pr-2 pb-2">
                    <div class="col-sm-2">
                        <a (click)="goto('total',-1)">
                            <i class="fa fa-caret-left caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                    <div class="col-sm-8 text-center colorlightGray">
                        {{this.reportModel !== 'Monthly'?'':(widget.total.month + 1 + ',') }} {{widget.total.year}}
                    </div>
                    <div class="col-sm-2">
                        <a (click)="goto('total',1)">
                            <i class="fa fa-caret-right caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
                <div class="row p-2">
                    <div class="col-sm-12 text-center colorDarkBlue">
                        <h4>{{widget.total.value}}</h4>
                    </div>
                </div>
                <div class="text-center p-2">
                    <a class="btn btn-default" (click)="getDetails('total')">Detail</a>
                </div>
            </div>
        </div>
        <div class="col-sm-3 pl-0 pr-1">
            <div class="backgroundWhite">
                <div class="text-center p-2">
                    Closed Accounts
                    <span class="float-right">
                        <a (click)="goto('closed',0)">
                            <i class="fa fa-refresh" aria-hidden="true"></i>
                        </a>
                    </span>
                    <hr class="m-2" />
                </div>
                <div class="row pl-3 pr-2 pb-2">
                    <div class="col-sm-2">
                        <a (click)="goto('closed',-1)">
                            <i class="fa fa-caret-left caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                    <div class="col-sm-8 text-center colorlightGray">
                        {{this.reportModel !== 'Monthly'?'':(widget.closed.month + 1 + ',')}} {{widget.closed.year}}
                    </div>
                    <div class="col-sm-2">
                        <a (click)="goto('closed',1)">
                            <i class="fa fa-caret-right caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
                <div class="row p-2">
                    <div class="col-sm-12 text-center colorDarkBlue">
                        <h4>{{widget.closed.value}}</h4>
                    </div>
                </div>
                <div class="text-center p-2">
                    <a class="btn btn-default" (click)="getDetails('closed')">Detail</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-5">
        <div class="backgroundWhite col-sm-12">
            <chart [type]="type" [data]="data" [options]="options" style="width: 100%;height:400px;"></chart>
            <span class="paymentBars">
                <i class="fa fa-bars" aria-hidden="true"></i>
            </span>
        </div>
    </div>
    <div class="row p-2 mt-3">
        <div class="col-sm-12 p-0 pt-3 pagination_align">
            <pagination-controls id='server' class="my-pagination" (pageChange)="getPage($event)" screenReaderPaginationLabel="Pagination" screenReaderPageLabel="page" screenReaderCurrentLabel="You're on page"></pagination-controls>
        </div>
    </div>
    <div class="row p-2">
        <!-- <div class="col-sm-12 text-right p-0">
            <select class="ddl_default mt-3">
                <option>Download</option>
                <option>PDF</option>
            </select>
        </div> -->
        <table class="table backgroundWhite">
            <thead>
                <tr>
                    <th width="5%"></th>
                    <th width="10%">Member ID</th>
                    <th width="14%">Name</th>
                    <th width="10%">Member Since</th>
                    <th width="15%"># of Transactions</th>
                    <th width="12%">Total $ Sales</th>
                    <th width="12%">Offer Requests</th>
                    <th width="10%">Last active</th>
                    <th width="12%">Payment Date</th>
                </tr>
            </thead>
            <tbody *ngFor="let order of orders.content | paginate: { id: 'server', itemsPerPage: orders.size, currentPage: orders.number + 1 , totalItems: orders.totalElements }; let idx = index">
                <tr>
                    <td> {{(orders.size*orders.number) + idx+1}} </td>
                    <td>{{order.orderId}}</td>
                    <td>{{order.orderItems[0].retailerName}}</td>
                    <td>{{order.purchasedDate | date:'shortDate'}}</td>
                    <td>{{order.payment.paymentStatus || 'unpaid' }}</td>
                    <td>{{'Manual'}}</td>
                    <td>{{(order.payment.paymentAmount /100) || '0'| currency }}</td>
                    <td>{{order.payment.paymentDate | date:'shortDate'}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>