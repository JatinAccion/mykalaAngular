<div class="container">
    <div class="row p-3">
        <div class="col-sm-6 title p-0">
            <h1>Summary</h1>
        </div>
        <div class="col-sm-3 title p-0"></div>
        <div class="col-sm-3 title text-right top_right p-0">
            <select class="ddl_default form-control mt-3" [(ngModel)]="reportModel" (change)="getData()">
                <option>Monthly</option>
                <option>Yearly</option>
            </select>
        </div>
    </div>
    <div class="row ">
        <div class="col-sm-3 pl-0">
            <div class="backgroundWhite">
                <div class="text-center p-2">
                    Total Payments
                    <span class="float-right">
                        <a>
                            <i class="fa fa-refresh" aria-hidden="true"></i>
                        </a>
                    </span>
                    <hr class="m-2" />
                </div>
                <div class="row pl-3 pr-2 pb-2">
                    <div class="col-sm-2">
                        <a (click)="goto('total',-1)">
                            <i class="fa fa-caret-left caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                    <div class="col-sm-8 text-center colorlightGray">
                        {{this.reportModel !== 'Monthly'?'':(widget.total.monthName + ',') }} {{widget.total.year}}
                    </div>
                    <div class="col-sm-2">
                        <a (click)="goto('total',1)">
                            <i class="fa fa-caret-right caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
                <div class="row p-2">
                    <div class="col-sm-12 text-center colorDarkBlue">
                        <h4>{{widget.total.value}}</h4>
                    </div>
                </div>
                <div class="text-center p-2">
                    <a class="btn btn-default" (click)="getDetails('total')">Detail</a>
                </div>
            </div>
        </div>
        <div class="col-sm-3 pl-0">
            <div class="backgroundWhite">
                <div class="text-center p-2">
                    Automated Payments
                    <span class="float-right">
                        <a (click)="goto('automatic',0)">
                            <i class="fa fa-refresh" aria-hidden="true"></i>
                        </a>
                    </span>
                    <hr class="m-2" />
                </div>
                <div class="row pl-3 pr-2 pb-2">
                    <div class="col-sm-2">
                        <a (click)="goto('automatic',-1)">
                            <i class="fa fa-caret-left caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                    <div class="col-sm-8 text-center colorlightGray">
                        {{this.reportModel !== 'Monthly'?'':(widget.automatic.monthName + ',') }} {{widget.automatic.year}}
                    </div>
                    <div class="col-sm-2">
                        <a (click)="goto('automatic',1)">
                            <i class="fa fa-caret-right caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
                <div class="row p-2">
                    <div class="col-sm-12 text-center colorDarkBlue">
                        <h4>{{widget.automatic.value}}</h4>
                    </div>
                </div>
                <div class="text-center p-2">
                    <a class="btn btn-default" (click)="getDetails('automatic')">Detail</a>
                </div>
            </div>
        </div>
        <div class="col-sm-3 pl-0">
            <div class="backgroundWhite">
                <div class="text-center p-2">
                    Manual Payments
                    <span class="float-right">
                        <a (click)="goto('manual',0)">
                            <i class="fa fa-refresh" aria-hidden="true"></i>
                        </a>
                    </span>
                    <hr class="m-2" />
                </div>
                <div class="row pl-3 pr-2 pb-2">
                    <div class="col-sm-2">
                        <a (click)="goto('manual',-1)">
                            <i class="fa fa-caret-left caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                    <div class="col-sm-8 text-center colorlightGray">
                        {{this.reportModel !== 'Monthly'?'':(widget.manual.monthName + ',') }} {{widget.manual.year}}
                    </div>
                    <div class="col-sm-2">
                        <a (click)="goto('manual',1)">
                            <i class="fa fa-caret-right caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
                <div class="row p-2">
                    <div class="col-sm-12 text-center colorDarkBlue">
                        <h4>{{widget.manual.value}}</h4>
                    </div>
                </div>
                <div class="text-center p-2">
                    <a class="btn btn-default" (click)="getDetails('manual')">Detail</a>
                </div>
            </div>
        </div>
        <div class="col-sm-3 pl-0">
            <div class="backgroundWhite">
                <div class="text-center p-2">
                    Pending Payments
                    <span class="float-right">
                        <a (click)="goto('pending',0)">
                            <i class="fa fa-refresh" aria-hidden="true"></i>
                        </a>
                    </span>
                    <hr class="m-2" />
                </div>
                <div class="row pl-3 pr-2 pb-2">
                    <div class="col-sm-2">
                        <a (click)="goto('pending',-1)">
                            <i class="fa fa-caret-left caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                    <div class="col-sm-8 text-center colorlightGray">
                        {{this.reportModel !== 'Monthly'?'':(widget.pending.monthName + ',')}} {{widget.pending.year}}
                    </div>
                    <div class="col-sm-2">
                        <a (click)="goto('pending',1)">
                            <i class="fa fa-caret-right caretFont" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
                <div class="row p-2">
                    <div class="col-sm-12 text-center colorDarkBlue">
                        <h4>{{widget.pending.value}}</h4>
                    </div>
                </div>
                <div class="text-center p-2">
                    <a class="btn btn-default" (click)="getDetails('pending')">Detail</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-5">
        <div class="col-sm-6 backgroundWhite">
            <chart [type]="type" [data]="data" [options]="options" style="width: 80%;height:400px;"></chart>
            <!-- <span class="paymentBars"><i class="fa fa-bars" aria-hidden="true"></i></span> -->
        </div>
        <div class="col-sm-6">
            <div class="backgroundWhite">
                <div class="text-center p-2">
                    Payments Summary, Total vs Avg.
                    <span class="float-right">
                        <select class="ddl_default" [(ngModel)]="summaryType" (change)="getSummary()">
                            <option value="TOTAL" >Total</option>
                            <option value="AVG">Average</option>
                        </select>
                    </span>
                </div>
                <div class="row p-2 m-2">
                    <table class="p-0 w-100" width="100">
                        <tbody>
                            <tr class="payment_border">
                                <td class="p-1" width="60%">Total Payments: </td>
                                <td class="p-1 text-right" width="20%">{{summary.totalCostOfGoods | currency}}</td>
                                <td width="20%"></td>
                            </tr>
                            <tr>
                                <td class="p-1 text-right">Product Sales Revenue: </td>
                                <td class="p-1 text-right">{{summary.saleRevenue | currency}}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td class="p-1 text-right">Shipping & Handling Fees:</td>
                                <td class="p-1 text-right">{{summary.totalShipCost | currency}}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td class="p-1 text-right">Payment Processing Fees:</td>
                                <td class="p-1 text-right">{{summary.stripeProcessingFees | currency}}</td>
                                <td></td>
                            </tr>
                            <tr class="payment_border">
                                <td class="p-1 text-right">Taxes:</td>
                                <td class="p-1 text-right">{{summary.totalTaxesCost | currency}}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td class="p-1">Net Revenue:</td>
                                <td class="p-1 text-right">{{summary.netRevenue | currency}}</td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="row p-2 mt-3">
        <div class="col-sm-12 p-0 pt-3 pagination_align">
            <pagination-controls id='server' class="my-pagination" (pageChange)="getPage($event)" screenReaderPaginationLabel="Pagination" screenReaderPageLabel="page" screenReaderCurrentLabel="You're on page"></pagination-controls>
        </div>
    </div>
    <div class="row p-2">

        <table class="table backgroundWhite" sortable-table (sorted)="onSorted($event)">
            <thead>
                <tr>
                    <th width="5%"></th>
                    <th width="10%">Order ID</th>
                    <th sortable-column="retailerName" width="14%">Seller</th>
                    <th sortable-column="orderDate" width="10%">Order Date</th>
                    <th sortable-column="paymentStatus" width="15%">Status</th>
                    <th sortable-column="paymentType" width="12%">Type</th>
                    <th sortable-column="orderAmount" width="12%">Sale $</th>
                    <th sortable-column="sellerPaymentAmount" width="10%">Payment $</th>
                    <th sortable-column="paymentInitiatedDate" width="12%">Payment Date</th>
                </tr>
            </thead>
            <tbody *ngFor="let order of orders.content | paginate: { id: 'server', itemsPerPage: orders.size, currentPage: orders.number + 1 , totalItems: orders.totalElements }; let idx = index">
                <tr>
                    <td> {{((orders.size*orders.number)||0) + idx+1}} </td>
                    <td>{{order.orderId}}</td>
                    <td>{{order.retailerName}}</td>
                    <td>{{order.orderDate | date:'shortDate'}}</td>
                    <td>{{order.paymentStatus || 'PENDING' }}</td>
                    <td>{{order.paymentType}}</td>
                    <td>{{order.orderAmount  | currency }}</td>
                    <td>{{(order.sellerPaymentAmount) || '0'| currency }}</td>
                    <td>{{order.paymentInitiatedDate | date:'shortDate'}}</td>
                </tr>
            </tbody>
        </table>
    </div>

</div>